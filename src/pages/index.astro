---
import { getCollection } from 'astro:content';
import FormattedDate from '../components/FormattedDate.astro';
import BaseLayout from '../layouts/BaseLayout.astro';

const posts = (await getCollection('posts')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<BaseLayout>
	<main class="max-w-[960px] p-4 mx-auto">
		<section>
			<ul class="md:grid md:grid-cols-2 gap-4 md:gap-8 list-none m-0 p-0">
				{
					posts.map((post) => (
						<li class="first:col-span-2 mb-4 text-center">
							<a
								href={`/posts/${post.slug}/`}
								class="block hover:no-underline group transition-colors"
							>
								<img
									src={`/img/${post.data.heroImage}`}
									alt=""
									class="mb-2 rounded-xl group-hover:shadow-lg transition-shadow ring-1 ring-gray-4"
								/>
								<h4 class="m-0 group-hover:opacity-80">{post.data.title}</h4>
								<p class="m-0 text-gray-11 font-sans text-base">
									<FormattedDate date={post.data.pubDate} />
								</p>
							</a>
						</li>
					))
				}
			</ul>
		</section>
	</main>
</BaseLayout>
